{% extends "base.html" %}
{% block title %}Book {{ chef.name }}{% endblock %}

{% block content %}
<div class="row g-4">
  <section class="col-lg-7">
    <div class="form-panel h-100">
      <h1 class="section-title">Book {{ chef.name }}</h1>
      <p class="section-subtitle">Submit your preferred date, time, and guest count. The chef can accept or reject from their dashboard.</p>

      <form method="post" class="row g-3">
        {% csrf_token %}
        <div class="col-md-6">
          <label for="id_date" class="form-label">Date</label>
          <input id="id_date" name="date" type="date" class="form-control" required />
        </div>
        <div class="col-md-6">
          <label for="id_time" class="form-label">Time</label>
          <input id="id_time" name="time" type="time" class="form-control" required />
        </div>
        <div class="col-md-6">
          <label for="id_person" class="form-label">Guests</label>
          <input id="id_person" name="person" type="number" min="1" value="2" class="form-control" required />
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-primary">Send Booking Request</button>
          <a href="{% url 'chef_list' %}" class="btn btn-outline-primary ms-2">Back to Chefs</a>
        </div>
      </form>
    </div>
  </section>

  <aside class="col-lg-5">
    <div class="page-card p-4 h-100">
      <h2 class="h5 mb-3">Chef details</h2>
      <p class="mb-2"><strong>Name:</strong> {{ chef.name }}</p>
      <p class="mb-2"><strong>Specialty:</strong> {{ chef.specialty }}</p>
      <p class="mb-2"><strong>Experience:</strong> {{ chef.experience }} years</p>
      <p class="mb-2"><strong>Team members:</strong> {{ chef.team_members|default:"Not listed" }}</p>
      <p class="mb-3"><strong>Price:</strong> INR {{ chef.price_per_person }} per person</p>
      <hr />
      <p class="mb-0 text-muted">After submission, you can track status from your dashboard.</p>
    </div>
  </aside>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
  const dateInput = document.getElementById("id_date");
  if (dateInput) {
    const today = new Date().toISOString().split("T")[0];
    dateInput.min = today;
  }
</script>
{% endblock %}
