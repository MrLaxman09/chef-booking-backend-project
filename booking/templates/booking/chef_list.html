{% extends "base.html" %} 
{% block title %}Available Chefs{% endblock %} 
{%block content %}
<div class="d-flex justify-content-around align-items-center container m-auto mb-5">
  
  <!-- Heading -->
  <h2 data-aos="fade-down" class="fw-bold display-6 text-light mb-0">
    ğŸ³ Available Chefs
  </h2>

 

  <!-- Search Input -->
 <input data-aos="fade-down" type="text" id="chefSearch" class="form-control w-25" placeholder="Search chefs...">

 <!-- ğŸ‘‡ Ye message by default hidden hoga -->
    

</div>



<div class="container m-auto row g-4">
  <p id="noResultMsg" class="text-center text-danger fw-bold" style="display:none;">
      âŒ No data found
    </p>
  {% for chef in chefs %}
  <div class="col-md-5 col-sm-6 col-lg-4 chef-card pb-4">
    
    <div style="background-color: #031633;"  class="card text-light h-100 border-0 shadow rounded-4">
      
      <!-- Bootstrap Carousel -->
      {% if chef.image %}
      <div
        id="carouselChef{{ chef.id }}"
        class="carousel slide"
        data-bs-ride="carousel"
      >
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img
              src="{{ chef.image.url }}"
              class="d-block w-100 p-2 rounded-4"
              style="height: 250px; object-fit: cover"
              alt="{{ chef.name }}"
            />
          </div>
          <div class="carousel-item">  
            <img
              src="{{ chef.image.url }}"
              class="d-block w-100 p-2 rounded-4"
              style="height: 250px; object-fit: cover"
              alt="{{ chef.name }}"
            />
          </div>
          <div class="carousel-item">
            <img
              src="{{ chef.image.url }}"
              class="d-block w-100 p-2 rounded-4"
              style="height: 250px; object-fit: cover"
              alt="{{ chef.name }}"
            />
          </div>
          <div class="carousel-item">
            <img
              src="{{ chef.image.url }}"
              class="d-block w-100 p-2 rounded-4"
              style="height: 250px; object-fit: cover"
              alt="{{ chef.name }}"
            />
          </div>
        </div>
        <div class="carousel-indicators">
          <button
            type="button"
            data-bs-target="#carouselChef{{ chef.id }}"
            data-bs-slide-to="0"
            class="active"
            aria-current="true"
            aria-label="Slide 1"
          ></button>
          <button
            type="button"
            data-bs-target="#carouselChef{{ chef.id }}"
            data-bs-slide-to="1"
            aria-label="Slide 2"
          ></button>
          <button
            type="button"
            data-bs-target="#carouselChef{{ chef.id }}"
            data-bs-slide-to="2"
            aria-label="Slide 3"
          ></button>
          <button
            type="button"
            data-bs-target="#carouselChef{{ chef.id }}"
            data-bs-slide-to="3"
            aria-label="Slide 4"
          ></button>
        </div>
      </div>
      {% else %} {% load static %}
      <img
        src="{% static 'images/default.webp' %}"
        class="card-img-top rounded-top-4"
        alt="Default Chef"
        style="height: 250px; object-fit: cover"
      />
      {% endif %}

      <!-- Card Body -->
      <div class="card-body d-flex flex-column  justify-content-between px-5 py-2" >
        <div >
          <a href="{% url 'profile_detail' username=chef.user %}">
          <div style="display: flex; align-items: center;">

            
            {% if chef.user.profile.profile_image %}
            <img
              src="{{ chef.user.profile.profile_image.url }}"
              class="rounded-square img-thumbnail shadow-sm"
                 style="max-width: 50px; max-height: 50px; object-fit: contain;"
              alt="chef.user.profile.profile_image"
            />
            {% else %}
            <img src="/static/images/default-chef.jpg"
                class="rounded-circle img-thumbnail shadow-sm"
                style="max-width: 50px; max-height: 50px; object-fit: cover;"
                alt="Default Chef" />
            {% endif %}
            
            <h5 class="card-title px-2 text-info fw-bold">{{ chef.name }}</h5>
            
          </div> </a>

          <p class="card-text mb-1">
            <i class="bi bi-star-fill text-warning me-1"></i
            ><strong>Specialty:</strong> {{ chef.specialty }}
          </p>
          <p class="card-text mb-1">
            <i class="bi bi-award text-success me-1"></i
            ><strong>Experience:</strong> {{ chef.experience }} years
          </p>
          <p class="card-text mb-1">
            <i class="bi bi-award  me-1"></i
            ><strong>Team-Members:</strong> {{ chef.team_members }} - 8
          </p>
          <p class="card-text fs-5 fw-semibold text-primary">
            â‚¹{{ chef.price_per_person }}
            <span class="fs-6 fw-normal text-secondary">/ Person</span>
          </p>
          
        </div>
        <!-- CTA Button -->
        <div class="mt-3">
          {% if request.user.is_authenticated and request.user != chef.user %}
          <a href="{% url 'book_chef' chef.id %}" class="btn btn-warning w-100"
            >ğŸ“… Book Now</a
          >
          {% else %}
          <a
            href="{% url 'my_bookings' %}"
            class="btn btn-outline-primary w-100"
            >ğŸ“‹ My Bookings</a
          >
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12 text-center">
    <div class="alert alert-warning">ğŸ˜” No chefs available right now.</div>
  </div>
  {% endfor %}
</div>



<script>
document.getElementById("chefSearch").addEventListener("keyup", function() {
  let query = this.value.toLowerCase();
  let cards = document.querySelectorAll(".chef-card"); // ğŸ‘ˆ ab hum poore card ko pakdenge
  let noResultMsg = document.getElementById("noResultMsg");
   let found = false; // track karenge koi result mila ya nahi
  
  cards.forEach(card => {
    let text = card.innerText.toLowerCase();
     if (text.includes(query)) {
      card.style.display = "";
      found = true;
    } else {
      card.style.display = "none";
    }
  });
  // agar kuch nahi mila
  noResultMsg.style.display = found ? "none" : "block";
});
</script>

<!-- Bootstrap JS CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
