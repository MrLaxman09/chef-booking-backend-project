{% extends "custom_admin/base.html" %}
{% block title %}Users{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Users</h3>
  <form method="get" class="d-flex">
    <input name="q" value="{{ q }}" class="form-control form-control-sm me-2" placeholder="Search by username or location">
    <button class="btn btn-sm btn-primary">Search</button>
  </form>
</div>

<table class="table table-hover">
  <thead class="table-light">
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Role</th>
      <th>Location</th>
      <th>Joined</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for profile in users %}
    <tr>
      <td>{{ profile.user.username }}</td>
      <td>{{ profile.user.email }}</td>
      <td>
        {% if profile.is_chef %}
          <span class="badge bg-info text-dark">Chef</span>
        {% else %}
          <span class="badge bg-secondary">User</span>
        {% endif %}
      </td>
      <td>{{ profile.location|default:"â€”" }}</td>
      <td>{{ profile.created_at|date:"d M Y" }}</td>
      <td>
        <a href="{% url 'custom_admin:user_view' profile.pk %}" class="btn btn-sm btn-outline-primary">View</a>
        <!-- Optional: add edit/delete if you implement those -->
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="6" class="text-center text-muted">No users found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<nav>
  <ul class="pagination">
    {% if users.has_previous %}
      <li class="page-item"><a class="page-link" href="?page={{ users.previous_page_number }}{% if q %}&q={{ q }}{% endif %}">Prev</a></li>
    {% endif %}
    <li class="page-item disabled"><span class="page-link">Page {{ users.number }} of {{ users.paginator.num_pages }}</span></li>
    {% if users.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ users.next_page_number }}{% if q %}&q={{ q }}{% endif %}">Next</a></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}
